{% load static %}
<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>GoGreen Cleanup ğŸŒ±</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- ğŸ§© BOOTSTRAP & FONT -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- ğŸ¨ MAIN CSS -->
    <link href="{% static 'app/css/main.css' %}" rel="stylesheet">
    <link href="{% static 'app/css/all.min.css' %}" rel="stylesheet">

    <!-- ğŸŒˆ TOASTR -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">

    <style>
      /* ğŸŒ¿ ToÃ n bá»™ giao diá»‡n */
      body {
        font-family: 'Poppins', sans-serif;
        background-color: #f7faf8;
        color: #333;
        scroll-behavior: smooth;
      }

      /* ğŸŒ³ Navbar trong suá»‘t, blur nháº¹ */
      .navbar {
        background: rgba(255, 255, 255, 0.85) !important;
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
      }
      .navbar.scrolled {
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .navbar-brand span {
        font-size: 1.2rem;
        letter-spacing: 0.5px;
      }

      .nav-link {
        position: relative;
        font-weight: 500;
        color: #333 !important;
        transition: color 0.3s ease;
      }
      .nav-link:hover {
        color: #198754 !important;
      }
      .nav-link::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        height: 3px;
        width: 0;
        background: #198754;
        transition: width 0.3s;
      }
      .nav-link:hover::after {
        width: 100%;
      }

      /* âœ¨ Buttons */
      .btn {
        border-radius: 10px !important;
        transition: all 0.3s ease;
      }
      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      }

      /* ğŸŒ¿ Footer gradient */
      footer {
        background: linear-gradient(135deg, #198754, #2ecc71);
        color: white;
        font-weight: 500;
        letter-spacing: 0.3px;
      }

      /* ğŸŒŠ Animation nháº¹ khi load content */
      main > * {
        opacity: 0;
        transform: translateY(10px);
        animation: fadeIn 0.6s ease forwards;
      }
      @keyframes fadeIn {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ğŸª´ Avatar bo gÃ³c Ä‘áº¹p hÆ¡n */
      .navbar img.rounded-circle {
        border: 2px solid #e6e6e6;
      }

      /* ğŸŒ LiÃªn há»‡ máº¡ng xÃ£ há»™i */
      .social-contact {
        position: fixed;
        right: 25px;
        bottom: 110px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 14px;
        z-index: 1100;
      }
      .social-btn {
        width: 54px;
        height: 54px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
      }
      .social-btn:hover {
        transform: translateY(-4px) scale(1.1);
        box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
      }
      .social-btn img {
        width: 75%;
        height: 75%;
        border-radius: 50%;
      }
      .social-btn.zalo { background: #0068FF; }
      .social-btn.tiktok { background: #000; }
      .social-btn.instagram {
        background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
      }
      .social-btn.facebook { background: #1877F2; }

      /* ğŸ’¬ Chat icon ná»•i báº­t */
      .chat-toggle {
        position: fixed;
        bottom: 30px;
        right: 25px;
        background-color: #198754;
        color: #fff;
        width: 55px;
        height: 55px;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 50%;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
        transition: transform 0.3s ease;
        animation: float 2.5s ease-in-out infinite;
        z-index: 1000;
      }
      @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-6px); }
      }
      .chat-toggle:hover { transform: scale(1.1); }

      .chat-popup {
        position: fixed;
        bottom: 100px;
        right: 25px;
        width: 340px;
        height: 420px;
        border-radius: 15px;
        overflow: hidden;
        background: white;
        box-shadow: 0 4px 20px rgba(0,0,0,0.25);
        display: none;
        flex-direction: column;
        z-index: 999;
      }
      .chat-header {
        background: #198754;
        color: white;
        padding: 10px 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .chat-header button {
        background: transparent;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
      }
    </style>
  </head>

  <body class="d-flex flex-column min-vh-100">

    <!-- ğŸŒ¿ NAVBAR -->
    <nav class="navbar navbar-expand-lg sticky-top py-2">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
          <img src="{% static 'app/images/logo.jpg' %}" alt="Logo" width="48" height="48" class="rounded-circle me-2">
          <span class="fw-bold text-success">GoGreen Cleanup ğŸŒ³</span>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto align-items-lg-center">
            <li class="nav-item"><a class="nav-link" href="/">ğŸ  Trang chá»§</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'social_home' %}">ğŸ’¬ Máº¡ng xÃ£ há»™i xanh</a></li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">ğŸŒ¿ Sá»± kiá»‡n</a>
              <ul class="dropdown-menu shadow-sm border-0">
                <li><a class="dropdown-item" href="{% url 'cart' %}">ğŸ“… Danh sÃ¡ch sá»± kiá»‡n</a></li>
                <li><a class="dropdown-item" href="{% url 'checkout' %}">ğŸ§â€â™‚ï¸ Sá»± kiá»‡n cá»§a báº¡n</a></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">ğŸ Pháº§n thÆ°á»Ÿng</a>
              <ul class="dropdown-menu shadow-sm border-0">
                <li><a class="dropdown-item" href="{% url 'redeem_rewards' %}">ğŸ¯ Äá»•i quÃ </a></li>
                <li><a class="dropdown-item" href="{% url 'reward_history' %}">ğŸ“œ Lá»‹ch sá»­ Ä‘á»•i quÃ </a></li>
              </ul>
            </li>

                <!-- ğŸ”§ ADMIN PANEL â€“ CHá»ˆ QUáº¢N TRá»Š VIÃŠN Má»šI THáº¤Y -->
    {% if user.is_authenticated and user.role == "admin" %}
<li class="nav-item">
  <a class="nav-link fw-bold text-danger" href="/admin/">
    ğŸ”§ Admin Panel
  </a>
</li>
{% endif %}


            {% if user.is_authenticated %}
            <li class="nav-item dropdown d-flex align-items-center">
              <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" data-bs-toggle="dropdown">
                {% if user.avatar %}
                  <img src="{{ user.avatar.url }}" alt="Avatar" class="rounded-circle me-2" width="35" height="35">
                {% else %}
                  <img src="{% static 'app/images/default-avatar.png' %}" alt="Default Avatar" class="rounded-circle me-2" width="35" height="35">
                {% endif %}
                <span class="fw-semibold">{{ user.username }}</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end shadow-sm border-0">
                <li><a class="dropdown-item" href="{% url 'profile' %}">ğŸ‘¤ Há»“ sÆ¡ cÃ¡ nhÃ¢n</a></li>
                <li><a class="dropdown-item" href="{% url 'notifications' %}">ğŸ”” ThÃ´ng bÃ¡o</a></li>
                <li><a class="dropdown-item" href="{% url 'chatbot' %}">ğŸ¤– Chat Bot</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item text-danger" href="{% url 'logout' %}">ğŸšª ÄÄƒng xuáº¥t</a></li>
              </ul>
            </li>
            {% else %}
            <li class="nav-item ms-lg-3">
              <a href="{% url 'login' %}" class="btn btn-outline-success btn-sm me-2">ÄÄƒng nháº­p</a>
              <a href="{% url 'register' %}" class="btn btn-success btn-sm text-white">ÄÄƒng kÃ½</a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <!-- ğŸŒ MAIN CONTENT -->
    <main class="flex-fill py-4">
      {% block banner-slider %}{% endblock %}
      {% block main-content %}{% endblock %}
      {% block cart_content %}{% endblock %}
      {% block content_checkout %}{% endblock %}
      {% block profile-content %}{% endblock %}
    </main>

    <!-- ğŸŒ± FOOTER -->
    <footer class="text-center py-3 mt-auto">
      <p class="mb-0">&copy; 2025 <b>GoGreen Cleanup</b> â€” Chung tay vÃ¬ mÃ´i trÆ°á»ng xanh ğŸŒ¿</p>
    </footer>

    <!-- ====================== JS ====================== -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'app/js/all.min.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <!-- ğŸŒŸ Toastr setup -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        {% if messages %}
          {% for message in messages %}
            toastr["{{ message.tags }}"]("{{ message|escapejs }}");
          {% endfor %}
        {% endif %}
        toastr.options = {
          closeButton: true,
          progressBar: true,
          positionClass: "toast-top-center",
          timeOut: 3000
        };
      });
    </script>

    <!-- ğŸŒ¿ Navbar Scroll Effect -->
    <script>
      window.addEventListener("scroll", () => {
        const nav = document.querySelector(".navbar");
        nav.classList.toggle("scrolled", window.scrollY > 50);
      });
    </script>

    <!-- ğŸŒ LiÃªn há»‡ máº¡ng xÃ£ há»™i -->
    <div class="social-contact">
      <a href="https://zalo.me/0379479384" class="social-btn zalo" target="_blank"><img src="{% static 'app/images/zalo.jpg' %}" alt="Zalo"></a>
      <a href="https://www.tiktok.com/@gogreencleanup" class="social-btn tiktok" target="_blank"><img src="{% static 'app/images/tk.jpg' %}" alt="TikTok"></a>
      <a href="https://www.instagram.com/gogreen.cleanup" class="social-btn instagram" target="_blank"><img src="{% static 'app/images/inta.jpg' %}" alt="Instagram"></a>
      <a href="https://www.facebook.com/share/17MsSkPC1q" class="social-btn facebook" target="_blank"><img src="{% static 'app/images/fb.jpg' %}" alt="Facebook"></a>
    </div>
    <!-- ğŸŒ REPORT BUTTON -->
<a href="{% url 'create_report' %}"
   class="report-btn"
   title="BÃ¡o cÃ¡o Ä‘iá»ƒm rÃ¡c">
    ğŸ“¸
</a>

<style>
    .report-btn {
        position: fixed;
        right: 25px;
        bottom: 370px;
        width: 60px;
        height: 60px;
        background: #28a745;
        color: white;
        font-size: 28px;
        font-weight: bold;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        text-decoration: none;
        box-shadow: 0 4px 10px rgba(0,0,0,0.25);
        transition: 0.3s ease;
        z-index: 999;
        animation: float2 2.8s infinite ease-in-out;
    }

    .report-btn:hover {
        background: #1e7e34;
        transform: scale(1.1);
    }

    @keyframes float2 {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-6px); }
    }
</style>
  </body>
</html>
